<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8" />
  <title>The Same Page</title>
  <style>
    body {
      font-family: Arial, sans-serif;
    }
    table {
      border-collapse: collapse;
      width: 80%;
      margin: 20px auto;
    }
    th, td {
      border: 1px solid #000;
      padding: 8px 12px;
      vertical-align: top;
    }
    th {
      background-color: #f2f2f2;
    }
    h1 {
      text-align: center;
    }
  </style>
</head>
<body>
    <h1>Conflicting Terms</h1>
    <table id="glossaryTable">
      <thead>
        <tr>
          <th>Term</th>
          <th>Existing Definitions (All Disciplines)</th>
          <th>Conflicting Definition</th>
          <th>Conflicting Discipline</th>
        </tr>
      </thead>
      <tbody></tbody>
    </table>
  
    <script>
      // We'll fetch two JSON files:
      // 1) 'terms.json' for known definitions (multiple disciplines)
      // 2) 'conflicting.json' for conflicting definitions
      const termsUrl = 'data/terms.json';
      const conflictsUrl = 'data/conflicting.json';
  
      let termsData = [];
      let conflictingData = [];
  
      // Fetch both files in parallel
      Promise.all([
        fetch(termsUrl).then(response => response.json()),
        fetch(conflictsUrl).then(response => response.json())
      ])
      .then(([terms, conflicts]) => {
        termsData = terms;
        conflictingData = conflicts;
        renderTable();
      })
      .catch(error => {
        console.error('Error fetching JSON data:', error);
      });
  
      // Returns HTML string listing all definitions for the given term
      function getAllDefinitions(term) {
        // Find the matching term object
        const termItem = termsData.find(item => item.term.toLowerCase() === term.toLowerCase());
        if (!termItem || !termItem.definitions) {
          return 'No definitions found.';
        }
        // Build a list of all discipline+definition pairs
        // You can style this differently if desired
        return termItem.definitions
          .map(def => `${def.discipline}: ${def.definition}`)
          .join('<br>');
      }
  
      // Renders table rows combining all definitions + conflicting definition
      function renderTable() {
        const tbody = document.querySelector('#glossaryTable tbody');
        let html = '';
  
        conflictingData.forEach(conflict => {
          const { term, definition, discipline } = conflict;
          const allDefs = getAllDefinitions(term);
  
          html += `
            <tr>
              <td>${term}</td>
              <td>${allDefs}</td>
              <td>${definition}</td>
              <td>${discipline}</td>
            </tr>
          `;
        });
  
        tbody.innerHTML = html;
      }
    </script>
  </body>